<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../../static/css/demo.css" th:ref="@{/css/demo.css}"/>
    <title th:text="'Wow Items - List of Items'"/>
</head>
<body>
<h3>List of Items</h3>
<table>
    <tr>
        <th>
            <a th:href="@{/items/add}"
               class="btn btn-primary btn-sm mb-3">
                Add Item
            </a>
            <a th:href="@{/items/read}"
               class="btn btn-primary btn-sm mb-3">
                Read from file
            </a>
        </th>
    </tr>
    <tr th:if="${itemList.size()} > 0">
        <th>
            <input type="text" id="search" placeholder="Search..." onkeyup="myFunction()">
        </th>
    </tr>
</table>
<a th:if="${itemList.size()} == 0">
    Database is empty. Add items.
</a>
<table id="table" border="1" th:if="${itemList.size()} > 0">
    <thead>
    <tr>
        <th>Name</th>
        <th>Action</th>
    </tr>
    </thead>
    <tbody id="tbodySearch">
    <tr th:each="item : ${itemList}">
        <td>
            <a th:href="@{/items/item(itemId=${item.id})}" th:text="${item.name}"/>
        </td>
        <td>
            <a th:href="@{/items/update(itemId=${item.id})}" class="btn btn-info btn-sm">
                Update
            </a>
            <a th:href="@{/items/delete(itemId=${item.id})}" class="btn btn-danger btn-sm"
               onclick="if (!(confirm('Are you sure you want to delete this item?'))) return false">
                Delete
            </a>
        </td>
    </tr>
    </tbody>
</table>
</body>
<script>
    function myFunction() {
        var input, filter, tbody, tr, a, i, txtValue;
        input = document.getElementById("search");
        filter = input.value.toUpperCase();
        tbody = document.getElementById("tbodySearch");
        tr = tbody.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) {
            a = tr[i].getElementsByTagName("a")[0];
            txtValue = a.textContent || a.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
            } else {
                tr[i].style.display = "none";
            }
        }
    }
</script>
</html>